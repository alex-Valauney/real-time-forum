<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>RTF</title>
        <link rel="stylesheet" href="/static/index.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.jade.min.css">
    </head>
    <body>
        {{if not .LoggedIn}}

        <section id="register" class="register hidden">
            <form method="POST" name="form">
                <input type="text" placeholder="Enter a pseudo" required>
                <input type="text" placeholder="Enter your First Name" required>
                <input type="text" placeholder="Enter your Last Name" required>
                <input type="number" min="13" max="150" placeholder="Enter your Age" required>
                <label> Gender : </label>
                <input type="radio" name="gender" required>
                <label> JPiou </label>
                <input type="radio" name="gender" required>
                <label> JPion </label>
                <input type="email" placeholder="Enter your E-mail" required>
                <input type="password" placeholder="Enter a password" required>
                <button type="submit">Register</button>
                <p>Already registered ? Just <a id="linkLogin">Log In</a></p>
            </form>

            <!--TEST WEBSOCKET-->
            <script>
                let socket = new WebSocket("ws://localhost:8080/ws")

                socket.onmessage = function (event) {
                    let output = document.querySelector("#output")
                    output.textContent = "received : " + event.data
                }

                socket.onopen = function (event) {
                    let output = document.querySelector("#output")
                    output.textContent = "connection successful"
                }

                socket.onerror = function (event) {
                    let output = document.querySelector("#output")
                    output.textContent = "error : " + event.data
                }

                function sendMessage() {
                    let textinputdata = document.querySelector("#testWS").value
                    console.log(textinputdata)
                    socket.send(textinputdata)
                }
            </script>

            <input type="text" id="testWS">
            <button id="testbutWS" onclick="sendMessage()">test WebSocket</button>
            <div id="output">test output</div>
            <!--TEST WEBSOCKET-->
        </section>

        <section id="login" class="login hidden">
            <form method="POST" name="form">
                <input type="text" placeholder="Enter your pseudo or E-mail" required>
                <input type="password" placeholder="Enter your password" required>
                <button type="submit">Log In</button>
                <p>Not yet registered ? <a id="linkRegister">Register</a></p>
            </form>
        </section>

        {{else}}

        <header></header>

        <nav></nav>

        <section id="index" class="index hidden">
            <div id="postList"></div>
        </section>

        <section id="createPost" class="createPost hidden">
        </section>

        <section id="post" class="post hidden">
        </section>

        {{end}}

        <script type="module">
            import { init } from '/script/script.js'
            init()
        </script>
    </body>
</html>